{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useNavigate}from'react-router-dom';import{AppBar,Toolbar,Button,Container,Grid,Card,CardContent,Typography,List,ListItem,ListItemText,TextField,Box}from'@mui/material';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function Dashboard(_ref){let{onLogout}=_ref;const[stats,setStats]=useState({balance:0,holdings:[]});const[order,setOrder]=useState({symbol:'',qty:''});const navigate=useNavigate();// Fetch user stats on mount\nuseEffect(()=>{fetch('/api/users/me/stats').then(res=>res.json()).then(data=>setStats(data)).catch(()=>alert('Could not load stats'));},[]);// Handlers for header buttons\nconst handleHome=()=>{navigate('/login');};const handleDashboard=()=>{navigate('/dashboard');};const handleLogout=()=>{// clear stored credentials\nlocalStorage.removeItem('username');localStorage.removeItem('token');onLogout();navigate('/login');};// Handle form field changes\nconst handleOrderChange=e=>setOrder(o=>({...o,[e.target.name]:e.target.value}));// Place trade\nconst placeOrder=async()=>{const username=localStorage.getItem('username')||'unknown';const payload={...order,username};const res=await fetch('/api/trades',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)});if(res.ok){alert(`Order placed by ${payload.username}: ${payload.qty} shares of ${payload.symbol}`);// optionally re‑fetch stats\n}else{alert('Order failed');}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(AppBar,{position:\"static\",children:/*#__PURE__*/_jsxs(Toolbar,{children:[/*#__PURE__*/_jsx(Button,{color:\"inherit\",onClick:handleHome,children:\"Home\"}),/*#__PURE__*/_jsx(Button,{color:\"inherit\",onClick:handleDashboard,children:\"Dashboard\"}),/*#__PURE__*/_jsx(Button,{color:\"inherit\",onClick:handleLogout,children:\"Logout\"})]})}),/*#__PURE__*/_jsx(Container,{sx:{mt:4},children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:4,children:/*#__PURE__*/_jsx(Card,{sx:{borderRadius:2},children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Account Balance\"}),/*#__PURE__*/_jsxs(Typography,{variant:\"h4\",color:\"primary\",children:[\"$\",stats.balance.toFixed(2)]}),/*#__PURE__*/_jsxs(Box,{mt:4,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Your Holdings\"}),/*#__PURE__*/_jsx(List,{children:stats.holdings.map(h=>/*#__PURE__*/_jsx(ListItem,{children:/*#__PURE__*/_jsx(ListItemText,{primary:`${h.symbol}: ${h.shares} shares`,secondary:`Avg cost: $${h.avgCost.toFixed(2)}`})},h.symbol))})]})]})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:8,children:/*#__PURE__*/_jsx(Card,{sx:{borderRadius:2},children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Place Order\"}),/*#__PURE__*/_jsxs(Box,{component:\"form\",sx:{display:'flex',gap:2,flexWrap:'wrap',alignItems:'center'},onSubmit:e=>{e.preventDefault();placeOrder();},children:[/*#__PURE__*/_jsx(TextField,{label:\"Symbol\",name:\"symbol\",value:order.symbol,onChange:handleOrderChange,required:true}),/*#__PURE__*/_jsx(TextField,{label:\"Quantity\",name:\"qty\",type:\"number\",value:order.qty,onChange:handleOrderChange,required:true}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",sx:{borderRadius:2,mt:1},children:\"Buy / Sell\"})]})]})})})]})})]});}","map":{"version":3,"names":["React","useEffect","useState","useNavigate","AppBar","Toolbar","Button","Container","Grid","Card","CardContent","Typography","List","ListItem","ListItemText","TextField","Box","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Dashboard","_ref","onLogout","stats","setStats","balance","holdings","order","setOrder","symbol","qty","navigate","fetch","then","res","json","data","catch","alert","handleHome","handleDashboard","handleLogout","localStorage","removeItem","handleOrderChange","e","o","target","name","value","placeOrder","username","getItem","payload","method","headers","body","JSON","stringify","ok","children","position","color","onClick","sx","mt","container","spacing","item","xs","md","borderRadius","variant","gutterBottom","toFixed","map","h","primary","shares","secondary","avgCost","component","display","gap","flexWrap","alignItems","onSubmit","preventDefault","label","onChange","required","type"],"sources":["/Users/benjaminzou/Desktop/CornellProjects/TradingPlatform/client/src/Dashboard.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport {\n  AppBar,\n  Toolbar,\n  Button,\n  Container,\n  Grid,\n  Card,\n  CardContent,\n  Typography,\n  List,\n  ListItem,\n  ListItemText,\n  TextField,\n  Box,\n} from '@mui/material';\n\nexport default function Dashboard({ onLogout }) {\n  const [stats, setStats] = useState({ balance: 0, holdings: [] });\n  const [order, setOrder] = useState({ symbol: '', qty: '' });\n  const navigate = useNavigate();\n\n  // Fetch user stats on mount\n  useEffect(() => {\n    fetch('/api/users/me/stats')\n      .then(res => res.json())\n      .then(data => setStats(data))\n      .catch(() => alert('Could not load stats'));\n  }, []);\n\n  // Handlers for header buttons\n  const handleHome = () => {\n    navigate('/login');\n  };\n  const handleDashboard = () => {\n    navigate('/dashboard');\n  };\n  const handleLogout = () => {\n    // clear stored credentials\n    localStorage.removeItem('username');\n    localStorage.removeItem('token');\n    onLogout();\n    navigate('/login');\n  };\n\n  // Handle form field changes\n  const handleOrderChange = e =>\n    setOrder(o => ({ ...o, [e.target.name]: e.target.value }));\n\n  // Place trade\n  const placeOrder = async () => {\n    const username = localStorage.getItem('username') || 'unknown';\n    const payload = { ...order, username };\n\n    const res = await fetch('/api/trades', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(payload),\n    });\n\n    if (res.ok) {\n      alert(`Order placed by ${payload.username}: ${payload.qty} shares of ${payload.symbol}`);\n      // optionally re‑fetch stats\n    } else {\n      alert('Order failed');\n    }\n  };\n\n  return (\n    <>\n      {/* HEADER */}\n      <AppBar position=\"static\">\n        <Toolbar>\n          <Button color=\"inherit\" onClick={handleHome}>\n            Home\n          </Button>\n          <Button color=\"inherit\" onClick={handleDashboard}>\n            Dashboard\n          </Button>\n          <Button color=\"inherit\" onClick={handleLogout}>\n            Logout\n          </Button>\n        </Toolbar>\n      </AppBar>\n\n      {/* MAIN CONTENT */}\n      <Container sx={{ mt: 4 }}>\n        <Grid container spacing={2}>\n          {/* Stats Panel */}\n          <Grid item xs={12} md={4}>\n            <Card sx={{ borderRadius: 2 }}>\n              <CardContent>\n                <Typography variant=\"h6\" gutterBottom>\n                  Account Balance\n                </Typography>\n                <Typography variant=\"h4\" color=\"primary\">\n                  ${stats.balance.toFixed(2)}\n                </Typography>\n                <Box mt={4}>\n                  <Typography variant=\"h6\" gutterBottom>\n                    Your Holdings\n                  </Typography>\n                  <List>\n                    {stats.holdings.map(h => (\n                      <ListItem key={h.symbol}>\n                        <ListItemText\n                          primary={`${h.symbol}: ${h.shares} shares`}\n                          secondary={`Avg cost: $${h.avgCost.toFixed(2)}`}\n                        />\n                      </ListItem>\n                    ))}\n                  </List>\n                </Box>\n              </CardContent>\n            </Card>\n          </Grid>\n\n          {/* Trade Panel */}\n          <Grid item xs={12} md={8}>\n            <Card sx={{ borderRadius: 2 }}>\n              <CardContent>\n                <Typography variant=\"h6\" gutterBottom>\n                  Place Order\n                </Typography>\n                <Box\n                  component=\"form\"\n                  sx={{\n                    display: 'flex',\n                    gap: 2,\n                    flexWrap: 'wrap',\n                    alignItems: 'center',\n                  }}\n                  onSubmit={e => {\n                    e.preventDefault();\n                    placeOrder();\n                  }}\n                >\n                  <TextField\n                    label=\"Symbol\"\n                    name=\"symbol\"\n                    value={order.symbol}\n                    onChange={handleOrderChange}\n                    required\n                  />\n                  <TextField\n                    label=\"Quantity\"\n                    name=\"qty\"\n                    type=\"number\"\n                    value={order.qty}\n                    onChange={handleOrderChange}\n                    required\n                  />\n                  <Button\n                    type=\"submit\"\n                    variant=\"contained\"\n                    sx={{ borderRadius: 2, mt: 1 }}\n                  >\n                    Buy / Sell\n                  </Button>\n                </Box>\n              </CardContent>\n            </Card>\n          </Grid>\n        </Grid>\n      </Container>\n    </>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}