{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Container,Grid,Card,CardContent,Typography,List,ListItem,ListItemText,TextField,Button,Box}from'@mui/material';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Dashboard(){const[stats,setStats]=useState({balance:0,holdings:[]});const[order,setOrder]=useState({symbol:'',qty:''});useEffect(()=>{const token=localStorage.getItem('token');fetch('/api/users/me/stats',{headers:{Authorization:`Bearer ${token}`}}).then(res=>res.json()).then(data=>setStats(data)).catch(()=>{alert('Session expired');window.location='/login';});},[]);const handleOrderChange=e=>setOrder(o=>({...o,[e.target.name]:e.target.value}));const placeOrder=async()=>{const token=localStorage.getItem('token');const res=await fetch('/api/trades',{method:'POST',headers:{'Content-Type':'application/json',Authorization:`Bearer ${token}`},body:JSON.stringify(order)});if(res.ok){alert('Order placed');// optionally refresh stats\n}else{alert('Order failed');}};return/*#__PURE__*/_jsx(Container,{sx:{mt:4},children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:4,children:/*#__PURE__*/_jsx(Card,{sx:{borderRadius:2},children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Account Balance\"}),/*#__PURE__*/_jsxs(Typography,{variant:\"h4\",color:\"primary\",children:[\"$\",stats.balance.toFixed(2)]}),/*#__PURE__*/_jsxs(Box,{mt:4,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Your Holdings\"}),/*#__PURE__*/_jsx(List,{children:stats.holdings.map(h=>/*#__PURE__*/_jsx(ListItem,{children:/*#__PURE__*/_jsx(ListItemText,{primary:`${h.symbol}: ${h.shares} shares`,secondary:`Avg cost: $${h.avgCost.toFixed(2)}`})},h.symbol))})]})]})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:8,children:/*#__PURE__*/_jsx(Card,{sx:{borderRadius:2},children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Place Order\"}),/*#__PURE__*/_jsxs(Box,{component:\"form\",sx:{display:'flex',gap:2,flexWrap:'wrap',alignItems:'center'},onSubmit:e=>{e.preventDefault();placeOrder();},children:[/*#__PURE__*/_jsx(TextField,{label:\"Symbol\",name:\"symbol\",value:order.symbol,onChange:handleOrderChange,required:true}),/*#__PURE__*/_jsx(TextField,{label:\"Quantity\",name:\"qty\",type:\"number\",value:order.qty,onChange:handleOrderChange,required:true}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",sx:{borderRadius:2,mt:1},children:\"Buy / Sell\"})]})]})})})]})});}","map":{"version":3,"names":["React","useEffect","useState","Container","Grid","Card","CardContent","Typography","List","ListItem","ListItemText","TextField","Button","Box","jsx","_jsx","jsxs","_jsxs","Dashboard","stats","setStats","balance","holdings","order","setOrder","symbol","qty","token","localStorage","getItem","fetch","headers","Authorization","then","res","json","data","catch","alert","window","location","handleOrderChange","e","o","target","name","value","placeOrder","method","body","JSON","stringify","ok","sx","mt","children","container","spacing","item","xs","md","borderRadius","variant","gutterBottom","color","toFixed","map","h","primary","shares","secondary","avgCost","component","display","gap","flexWrap","alignItems","onSubmit","preventDefault","label","onChange","required","type"],"sources":["/Users/benjaminzou/Desktop/CornellProjects/TradingPlatform/client/src/Dashboard.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport {\n  Container,\n  Grid,\n  Card,\n  CardContent,\n  Typography,\n  List,\n  ListItem,\n  ListItemText,\n  TextField,\n  Button,\n  Box,\n} from '@mui/material';\n\nexport default function Dashboard() {\n  const [stats, setStats] = useState({ balance: 0, holdings: [] });\n  const [order, setOrder] = useState({ symbol: '', qty: '' });\n\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    fetch('/api/users/me/stats', {\n      headers: { Authorization: `Bearer ${token}` },\n    })\n      .then(res => res.json())\n      .then(data => setStats(data))\n      .catch(() => {\n        alert('Session expired');\n        window.location = '/login';\n      });\n  }, []);\n\n  const handleOrderChange = e =>\n    setOrder(o => ({ ...o, [e.target.name]: e.target.value }));\n\n  const placeOrder = async () => {\n    const token = localStorage.getItem('token');\n    const res = await fetch('/api/trades', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${token}`,\n      },\n      body: JSON.stringify(order),\n    });\n    if (res.ok) {\n      alert('Order placed');\n      // optionally refresh stats\n    } else {\n      alert('Order failed');\n    }\n  };\n\n  return (\n    <Container sx={{ mt: 4 }}>\n      <Grid container spacing={2}>\n        {/* Left: Stats */}\n        <Grid item xs={12} md={4}>\n          <Card sx={{ borderRadius: 2 }}>\n            <CardContent>\n              <Typography variant=\"h6\" gutterBottom>\n                Account Balance\n              </Typography>\n              <Typography variant=\"h4\" color=\"primary\">\n                ${stats.balance.toFixed(2)}\n              </Typography>\n\n              <Box mt={4}>\n                <Typography variant=\"h6\" gutterBottom>\n                  Your Holdings\n                </Typography>\n                <List>\n                  {stats.holdings.map(h => (\n                    <ListItem key={h.symbol}>\n                      <ListItemText\n                        primary={`${h.symbol}: ${h.shares} shares`}\n                        secondary={`Avg cost: $${h.avgCost.toFixed(2)}`}\n                      />\n                    </ListItem>\n                  ))}\n                </List>\n              </Box>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        {/* Right: Trade Form */}\n        <Grid item xs={12} md={8}>\n          <Card sx={{ borderRadius: 2 }}>\n            <CardContent>\n              <Typography variant=\"h6\" gutterBottom>\n                Place Order\n              </Typography>\n              <Box\n                component=\"form\"\n                sx={{\n                  display: 'flex',\n                  gap: 2,\n                  flexWrap: 'wrap',\n                  alignItems: 'center',\n                }}\n                onSubmit={e => {\n                  e.preventDefault();\n                  placeOrder();\n                }}\n              >\n                <TextField\n                  label=\"Symbol\"\n                  name=\"symbol\"\n                  value={order.symbol}\n                  onChange={handleOrderChange}\n                  required\n                />\n                <TextField\n                  label=\"Quantity\"\n                  name=\"qty\"\n                  type=\"number\"\n                  value={order.qty}\n                  onChange={handleOrderChange}\n                  required\n                />\n                <Button\n                  type=\"submit\"\n                  variant=\"contained\"\n                  sx={{ borderRadius: 2, mt: 1 }}\n                >\n                  Buy / Sell\n                </Button>\n              </Box>\n            </CardContent>\n          </Card>\n        </Grid>\n      </Grid>\n    </Container>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}