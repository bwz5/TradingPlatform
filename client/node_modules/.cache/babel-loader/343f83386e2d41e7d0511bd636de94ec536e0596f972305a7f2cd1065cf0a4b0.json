{"ast":null,"code":"// client/src/Dashboard.js\nimport React,{useEffect,useState}from'react';import{Container,Grid,Card,CardContent,Typography,List,ListItem,ListItemText,TextField,Button,Box}from'@mui/material';import{useNavigate}from'react-router-dom';import{apiFetch,clearAuth}from'./auth';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Dashboard(_ref){let{onLogout}=_ref;const[stats,setStats]=useState({balance:0,holdings:[]});const[order,setOrder]=useState({symbol:'',qty:''});const nav=useNavigate();/* fetch portfolio */useEffect(()=>{apiFetch('/api/users/me/stats').then(async res=>{if(!res.ok)throw new Error('auth');return res.json();}).then(setStats).catch(()=>{clearAuth();onLogout();nav('/login');});},[]);/* form inputs */const handleOrderChange=e=>setOrder(o=>({...o,[e.target.name]:e.target.value}));/* place trade */const placeOrder=async()=>{const res=await apiFetch('/api/trades',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(order)});const data=await res.json();if(!res.ok)return alert(data.msg||'Order failed');alert(data.msg);};return/*#__PURE__*/_jsx(Container,{sx:{mt:4},children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:4,children:/*#__PURE__*/_jsx(Card,{sx:{borderRadius:2},children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"Account Balance\"}),/*#__PURE__*/_jsxs(Typography,{variant:\"h4\",color:\"primary\",children:[\"$\",stats.balance.toFixed(2)]}),/*#__PURE__*/_jsxs(Box,{mt:4,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"Your Holdings\"}),/*#__PURE__*/_jsx(List,{children:stats.holdings.map(h=>/*#__PURE__*/_jsx(ListItem,{children:/*#__PURE__*/_jsx(ListItemText,{primary:`${h.symbol}: ${h.shares} shares`,secondary:`Avg cost: $${h.avgCost.toFixed(2)}`})},h.symbol))})]})]})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:8,children:/*#__PURE__*/_jsx(Card,{sx:{borderRadius:2},children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"Place Order\"}),/*#__PURE__*/_jsxs(Box,{component:\"form\",onSubmit:e=>{e.preventDefault();placeOrder();},sx:{display:'flex',gap:2,flexWrap:'wrap',alignItems:'center'},children:[/*#__PURE__*/_jsx(TextField,{label:\"Symbol\",name:\"symbol\",value:order.symbol,onChange:handleOrderChange,required:true}),/*#__PURE__*/_jsx(TextField,{label:\"Quantity\",name:\"qty\",type:\"number\",value:order.qty,onChange:handleOrderChange,required:true}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",type:\"submit\",sx:{mt:1},children:\"Buy / Sell\"})]})]})})})]})});}","map":{"version":3,"names":["React","useEffect","useState","Container","Grid","Card","CardContent","Typography","List","ListItem","ListItemText","TextField","Button","Box","useNavigate","apiFetch","clearAuth","jsx","_jsx","jsxs","_jsxs","Dashboard","_ref","onLogout","stats","setStats","balance","holdings","order","setOrder","symbol","qty","nav","then","res","ok","Error","json","catch","handleOrderChange","e","o","target","name","value","placeOrder","method","headers","body","JSON","stringify","data","alert","msg","sx","mt","children","container","spacing","item","xs","md","borderRadius","variant","color","toFixed","map","h","primary","shares","secondary","avgCost","component","onSubmit","preventDefault","display","gap","flexWrap","alignItems","label","onChange","required","type"],"sources":["/Users/benjaminzou/Desktop/CornellProjects/TradingPlatform/client/src/Dashboard.js"],"sourcesContent":["// client/src/Dashboard.js\nimport React, { useEffect, useState } from 'react';\nimport {\n  Container, Grid, Card, CardContent,\n  Typography, List, ListItem, ListItemText,\n  TextField, Button, Box,\n} from '@mui/material';\nimport { useNavigate } from 'react-router-dom';\nimport { apiFetch, clearAuth } from './auth';\n\nexport default function Dashboard({ onLogout }) {\n  const [stats, setStats] = useState({ balance: 0, holdings: [] });\n  const [order, setOrder] = useState({ symbol: '', qty: '' });\n  const nav = useNavigate();\n\n  /* fetch portfolio */\n  useEffect(() => {\n    apiFetch('/api/users/me/stats')\n      .then(async (res) => {\n        if (!res.ok) throw new Error('auth');\n        return res.json();\n      })\n      .then(setStats)\n      .catch(() => {\n        clearAuth();\n        onLogout();\n        nav('/login');\n      });\n  }, []);\n\n  /* form inputs */\n  const handleOrderChange = (e) =>\n    setOrder((o) => ({ ...o, [e.target.name]: e.target.value }));\n\n  /* place trade */\n  const placeOrder = async () => {\n    const res = await apiFetch('/api/trades', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(order),\n    });\n    const data = await res.json();\n    if (!res.ok) return alert(data.msg || 'Order failed');\n    alert(data.msg);\n  };\n\n  return (\n    <Container sx={{ mt: 4 }}>\n      <Grid container spacing={2}>\n        {/* Stats */}\n        <Grid item xs={12} md={4}>\n          <Card sx={{ borderRadius: 2 }}>\n            <CardContent>\n              <Typography variant=\"h6\">Account Balance</Typography>\n              <Typography variant=\"h4\" color=\"primary\">\n                ${stats.balance.toFixed(2)}\n              </Typography>\n              <Box mt={4}>\n                <Typography variant=\"h6\">Your Holdings</Typography>\n                <List>\n                  {stats.holdings.map((h) => (\n                    <ListItem key={h.symbol}>\n                      <ListItemText\n                        primary={`${h.symbol}: ${h.shares} shares`}\n                        secondary={`Avg cost: $${h.avgCost.toFixed(2)}`}\n                      />\n                    </ListItem>\n                  ))}\n                </List>\n              </Box>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        {/* Trade */}\n        <Grid item xs={12} md={8}>\n          <Card sx={{ borderRadius: 2 }}>\n            <CardContent>\n              <Typography variant=\"h6\">Place Order</Typography>\n              <Box\n                component=\"form\"\n                onSubmit={(e) => {\n                  e.preventDefault();\n                  placeOrder();\n                }}\n                sx={{\n                  display: 'flex',\n                  gap: 2,\n                  flexWrap: 'wrap',\n                  alignItems: 'center',\n                }}\n              >\n                <TextField\n                  label=\"Symbol\"\n                  name=\"symbol\"\n                  value={order.symbol}\n                  onChange={handleOrderChange}\n                  required\n                />\n                <TextField\n                  label=\"Quantity\"\n                  name=\"qty\"\n                  type=\"number\"\n                  value={order.qty}\n                  onChange={handleOrderChange}\n                  required\n                />\n                <Button variant=\"contained\" type=\"submit\" sx={{ mt: 1 }}>\n                  Buy / Sell\n                </Button>\n              </Box>\n            </CardContent>\n          </Card>\n        </Grid>\n      </Grid>\n    </Container>\n  );\n}\n"],"mappings":"AAAA;AACA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OACEC,SAAS,CAAEC,IAAI,CAAEC,IAAI,CAAEC,WAAW,CAClCC,UAAU,CAAEC,IAAI,CAAEC,QAAQ,CAAEC,YAAY,CACxCC,SAAS,CAAEC,MAAM,CAAEC,GAAG,KACjB,eAAe,CACtB,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,OAASC,QAAQ,CAAEC,SAAS,KAAQ,QAAQ,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE7C,cAAe,SAAS,CAAAC,SAASA,CAAAC,IAAA,CAAe,IAAd,CAAEC,QAAS,CAAC,CAAAD,IAAA,CAC5C,KAAM,CAACE,KAAK,CAAEC,QAAQ,CAAC,CAAGvB,QAAQ,CAAC,CAAEwB,OAAO,CAAE,CAAC,CAAEC,QAAQ,CAAE,EAAG,CAAC,CAAC,CAChE,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAG3B,QAAQ,CAAC,CAAE4B,MAAM,CAAE,EAAE,CAAEC,GAAG,CAAE,EAAG,CAAC,CAAC,CAC3D,KAAM,CAAAC,GAAG,CAAGlB,WAAW,CAAC,CAAC,CAEzB,qBACAb,SAAS,CAAC,IAAM,CACdc,QAAQ,CAAC,qBAAqB,CAAC,CAC5BkB,IAAI,CAAC,KAAO,CAAAC,GAAG,EAAK,CACnB,GAAI,CAACA,GAAG,CAACC,EAAE,CAAE,KAAM,IAAI,CAAAC,KAAK,CAAC,MAAM,CAAC,CACpC,MAAO,CAAAF,GAAG,CAACG,IAAI,CAAC,CAAC,CACnB,CAAC,CAAC,CACDJ,IAAI,CAACR,QAAQ,CAAC,CACda,KAAK,CAAC,IAAM,CACXtB,SAAS,CAAC,CAAC,CACXO,QAAQ,CAAC,CAAC,CACVS,GAAG,CAAC,QAAQ,CAAC,CACf,CAAC,CAAC,CACN,CAAC,CAAE,EAAE,CAAC,CAEN,iBACA,KAAM,CAAAO,iBAAiB,CAAIC,CAAC,EAC1BX,QAAQ,CAAEY,CAAC,GAAM,CAAE,GAAGA,CAAC,CAAE,CAACD,CAAC,CAACE,MAAM,CAACC,IAAI,EAAGH,CAAC,CAACE,MAAM,CAACE,KAAM,CAAC,CAAC,CAAC,CAE9D,iBACA,KAAM,CAAAC,UAAU,CAAG,KAAAA,CAAA,GAAY,CAC7B,KAAM,CAAAX,GAAG,CAAG,KAAM,CAAAnB,QAAQ,CAAC,aAAa,CAAE,CACxC+B,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CAAE,cAAc,CAAE,kBAAmB,CAAC,CAC/CC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACtB,KAAK,CAC5B,CAAC,CAAC,CACF,KAAM,CAAAuB,IAAI,CAAG,KAAM,CAAAjB,GAAG,CAACG,IAAI,CAAC,CAAC,CAC7B,GAAI,CAACH,GAAG,CAACC,EAAE,CAAE,MAAO,CAAAiB,KAAK,CAACD,IAAI,CAACE,GAAG,EAAI,cAAc,CAAC,CACrDD,KAAK,CAACD,IAAI,CAACE,GAAG,CAAC,CACjB,CAAC,CAED,mBACEnC,IAAA,CAACf,SAAS,EAACmD,EAAE,CAAE,CAAEC,EAAE,CAAE,CAAE,CAAE,CAAAC,QAAA,cACvBpC,KAAA,CAAChB,IAAI,EAACqD,SAAS,MAACC,OAAO,CAAE,CAAE,CAAAF,QAAA,eAEzBtC,IAAA,CAACd,IAAI,EAACuD,IAAI,MAACC,EAAE,CAAE,EAAG,CAACC,EAAE,CAAE,CAAE,CAAAL,QAAA,cACvBtC,IAAA,CAACb,IAAI,EAACiD,EAAE,CAAE,CAAEQ,YAAY,CAAE,CAAE,CAAE,CAAAN,QAAA,cAC5BpC,KAAA,CAACd,WAAW,EAAAkD,QAAA,eACVtC,IAAA,CAACX,UAAU,EAACwD,OAAO,CAAC,IAAI,CAAAP,QAAA,CAAC,iBAAe,CAAY,CAAC,cACrDpC,KAAA,CAACb,UAAU,EAACwD,OAAO,CAAC,IAAI,CAACC,KAAK,CAAC,SAAS,CAAAR,QAAA,EAAC,GACtC,CAAChC,KAAK,CAACE,OAAO,CAACuC,OAAO,CAAC,CAAC,CAAC,EAChB,CAAC,cACb7C,KAAA,CAACP,GAAG,EAAC0C,EAAE,CAAE,CAAE,CAAAC,QAAA,eACTtC,IAAA,CAACX,UAAU,EAACwD,OAAO,CAAC,IAAI,CAAAP,QAAA,CAAC,eAAa,CAAY,CAAC,cACnDtC,IAAA,CAACV,IAAI,EAAAgD,QAAA,CACFhC,KAAK,CAACG,QAAQ,CAACuC,GAAG,CAAEC,CAAC,eACpBjD,IAAA,CAACT,QAAQ,EAAA+C,QAAA,cACPtC,IAAA,CAACR,YAAY,EACX0D,OAAO,CAAE,GAAGD,CAAC,CAACrC,MAAM,KAAKqC,CAAC,CAACE,MAAM,SAAU,CAC3CC,SAAS,CAAE,cAAcH,CAAC,CAACI,OAAO,CAACN,OAAO,CAAC,CAAC,CAAC,EAAG,CACjD,CAAC,EAJWE,CAAC,CAACrC,MAKP,CACX,CAAC,CACE,CAAC,EACJ,CAAC,EACK,CAAC,CACV,CAAC,CACH,CAAC,cAGPZ,IAAA,CAACd,IAAI,EAACuD,IAAI,MAACC,EAAE,CAAE,EAAG,CAACC,EAAE,CAAE,CAAE,CAAAL,QAAA,cACvBtC,IAAA,CAACb,IAAI,EAACiD,EAAE,CAAE,CAAEQ,YAAY,CAAE,CAAE,CAAE,CAAAN,QAAA,cAC5BpC,KAAA,CAACd,WAAW,EAAAkD,QAAA,eACVtC,IAAA,CAACX,UAAU,EAACwD,OAAO,CAAC,IAAI,CAAAP,QAAA,CAAC,aAAW,CAAY,CAAC,cACjDpC,KAAA,CAACP,GAAG,EACF2D,SAAS,CAAC,MAAM,CAChBC,QAAQ,CAAGjC,CAAC,EAAK,CACfA,CAAC,CAACkC,cAAc,CAAC,CAAC,CAClB7B,UAAU,CAAC,CAAC,CACd,CAAE,CACFS,EAAE,CAAE,CACFqB,OAAO,CAAE,MAAM,CACfC,GAAG,CAAE,CAAC,CACNC,QAAQ,CAAE,MAAM,CAChBC,UAAU,CAAE,QACd,CAAE,CAAAtB,QAAA,eAEFtC,IAAA,CAACP,SAAS,EACRoE,KAAK,CAAC,QAAQ,CACdpC,IAAI,CAAC,QAAQ,CACbC,KAAK,CAAEhB,KAAK,CAACE,MAAO,CACpBkD,QAAQ,CAAEzC,iBAAkB,CAC5B0C,QAAQ,MACT,CAAC,cACF/D,IAAA,CAACP,SAAS,EACRoE,KAAK,CAAC,UAAU,CAChBpC,IAAI,CAAC,KAAK,CACVuC,IAAI,CAAC,QAAQ,CACbtC,KAAK,CAAEhB,KAAK,CAACG,GAAI,CACjBiD,QAAQ,CAAEzC,iBAAkB,CAC5B0C,QAAQ,MACT,CAAC,cACF/D,IAAA,CAACN,MAAM,EAACmD,OAAO,CAAC,WAAW,CAACmB,IAAI,CAAC,QAAQ,CAAC5B,EAAE,CAAE,CAAEC,EAAE,CAAE,CAAE,CAAE,CAAAC,QAAA,CAAC,YAEzD,CAAQ,CAAC,EACN,CAAC,EACK,CAAC,CACV,CAAC,CACH,CAAC,EACH,CAAC,CACE,CAAC,CAEhB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}