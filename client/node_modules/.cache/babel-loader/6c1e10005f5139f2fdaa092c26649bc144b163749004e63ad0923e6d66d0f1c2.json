{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Container,Grid,Card,CardContent,Typography,List,ListItem,ListItemText,TextField,Button,Box}from'@mui/material';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Dashboard(){const[stats,setStats]=useState({balance:0,holdings:[]});const[order,setOrder]=useState({symbol:'',qty:''});useEffect(()=>{// simple fetch with no auth header\nfetch('/api/users/me/stats').then(res=>res.json()).then(data=>setStats(data)).catch(err=>{console.error(err);alert('Could not load stats');});},[]);const handleOrderChange=e=>setOrder(o=>({...o,[e.target.name]:e.target.value}));const username=localStorage.getItem('username')||'unknown';const payload={...order,username};const placeOrder=async()=>{const res=await fetch('/api/trades',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)});if(res.ok){alert('Order placed!');const username=localStorage.getItem('username')||'Unknown user';alert(`Order placed for ${order.qty} shares of ${order.symbol} by ${username}!`);// optionally re-fetch stats here\n}else{alert('Order failed');}};return/*#__PURE__*/_jsx(Container,{sx:{mt:4},children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:4,children:/*#__PURE__*/_jsx(Card,{sx:{borderRadius:2},children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Account Balance\"}),/*#__PURE__*/_jsxs(Typography,{variant:\"h4\",color:\"primary\",children:[\"$\",stats.balance.toFixed(2)]}),/*#__PURE__*/_jsxs(Box,{mt:4,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Your Holdings\"}),/*#__PURE__*/_jsx(List,{children:stats.holdings.map(h=>/*#__PURE__*/_jsx(ListItem,{children:/*#__PURE__*/_jsx(ListItemText,{primary:`${h.symbol}: ${h.shares} shares`,secondary:`Avg cost: $${h.avgCost.toFixed(2)}`})},h.symbol))})]})]})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:8,children:/*#__PURE__*/_jsx(Card,{sx:{borderRadius:2},children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Place Order\"}),/*#__PURE__*/_jsxs(Box,{component:\"form\",sx:{display:'flex',gap:2,flexWrap:'wrap',alignItems:'center'},onSubmit:e=>{e.preventDefault();placeOrder();},children:[/*#__PURE__*/_jsx(TextField,{label:\"Symbol\",name:\"symbol\",value:order.symbol,onChange:handleOrderChange,required:true}),/*#__PURE__*/_jsx(TextField,{label:\"Quantity\",name:\"qty\",type:\"number\",value:order.qty,onChange:handleOrderChange,required:true}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",sx:{borderRadius:2,mt:1},children:\"Buy / Sell\"})]})]})})})]})});}","map":{"version":3,"names":["React","useEffect","useState","Container","Grid","Card","CardContent","Typography","List","ListItem","ListItemText","TextField","Button","Box","jsx","_jsx","jsxs","_jsxs","Dashboard","stats","setStats","balance","holdings","order","setOrder","symbol","qty","fetch","then","res","json","data","catch","err","console","error","alert","handleOrderChange","e","o","target","name","value","username","localStorage","getItem","payload","placeOrder","method","headers","body","JSON","stringify","ok","sx","mt","children","container","spacing","item","xs","md","borderRadius","variant","gutterBottom","color","toFixed","map","h","primary","shares","secondary","avgCost","component","display","gap","flexWrap","alignItems","onSubmit","preventDefault","label","onChange","required","type"],"sources":["/Users/benjaminzou/Desktop/CornellProjects/TradingPlatform/client/src/Dashboard.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport {\n  Container,\n  Grid,\n  Card,\n  CardContent,\n  Typography,\n  List,\n  ListItem,\n  ListItemText,\n  TextField,\n  Button,\n  Box,\n} from '@mui/material';\n\nexport default function Dashboard() {\n  const [stats, setStats] = useState({ balance: 0, holdings: [] });\n  const [order, setOrder] = useState({ symbol: '', qty: '' });\n\n  useEffect(() => {\n    // simple fetch with no auth header\n    fetch('/api/users/me/stats')\n      .then((res) => res.json())\n      .then((data) => setStats(data))\n      .catch((err) => {\n        console.error(err);\n        alert('Could not load stats');\n      });\n  }, []);\n\n  const handleOrderChange = (e) =>\n    setOrder((o) => ({ ...o, [e.target.name]: e.target.value }));\n    const username = localStorage.getItem('username') || 'unknown';\n\n    const payload = {\n        ...order,\n        username,\n    }\n    const placeOrder = async () => {\n        const res = await fetch('/api/trades', {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify(payload),\n        });\n    \n        if (res.ok) {\n         alert('Order placed!');\n         const username = localStorage.getItem('username') || 'Unknown user';\n         alert(`Order placed for ${order.qty} shares of ${order.symbol} by ${username}!`);\n          // optionally re-fetch stats here\n        } else {\n          alert('Order failed');\n        }\n      };\n    \n\n  return (\n    <Container sx={{ mt: 4 }}>\n      <Grid container spacing={2}>\n        {/* Stats Panel */}\n        <Grid item xs={12} md={4}>\n          <Card sx={{ borderRadius: 2 }}>\n            <CardContent>\n              <Typography variant=\"h6\" gutterBottom>\n                Account Balance\n              </Typography>\n              <Typography variant=\"h4\" color=\"primary\">\n                ${stats.balance.toFixed(2)}\n              </Typography>\n\n              <Box mt={4}>\n                <Typography variant=\"h6\" gutterBottom>\n                  Your Holdings\n                </Typography>\n                <List>\n                  {stats.holdings.map((h) => (\n                    <ListItem key={h.symbol}>\n                      <ListItemText\n                        primary={`${h.symbol}: ${h.shares} shares`}\n                        secondary={`Avg cost: $${h.avgCost.toFixed(2)}`}\n                      />\n                    </ListItem>\n                  ))}\n                </List>\n              </Box>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        {/* Trade Panel */}\n        <Grid item xs={12} md={8}>\n          <Card sx={{ borderRadius: 2 }}>\n            <CardContent>\n              <Typography variant=\"h6\" gutterBottom>\n                Place Order\n              </Typography>\n              <Box\n                component=\"form\"\n                sx={{\n                  display: 'flex',\n                  gap: 2,\n                  flexWrap: 'wrap',\n                  alignItems: 'center',\n                }}\n                onSubmit={(e) => {\n                  e.preventDefault();\n                  placeOrder();\n                }}\n              >\n                <TextField\n                  label=\"Symbol\"\n                  name=\"symbol\"\n                  value={order.symbol}\n                  onChange={handleOrderChange}\n                  required\n                />\n                <TextField\n                  label=\"Quantity\"\n                  name=\"qty\"\n                  type=\"number\"\n                  value={order.qty}\n                  onChange={handleOrderChange}\n                  required\n                />\n                <Button\n                  type=\"submit\"\n                  variant=\"contained\"\n                  sx={{ borderRadius: 2, mt: 1 }}\n                >\n                  Buy / Sell\n                </Button>\n              </Box>\n            </CardContent>\n          </Card>\n        </Grid>\n      </Grid>\n    </Container>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}