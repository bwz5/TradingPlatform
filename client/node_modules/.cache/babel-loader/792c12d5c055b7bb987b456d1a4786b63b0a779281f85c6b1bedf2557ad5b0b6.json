{"ast":null,"code":"// client/src/Dashboard.js\nimport React,{useEffect,useState}from'react';import{Container,Grid,Card,CardContent,Typography,List,ListItem,ListItemText,TextField,Button,Box}from'@mui/material';import{useNavigate}from'react-router-dom';import{apiFetch,clearAuth}from'./auth';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Dashboard(_ref){let{onLogout}=_ref;const[stats,setStats]=useState({balance:0,holdings:[]});const[order,setOrder]=useState({symbol:'',qty:'',side:'buy'});const nav=useNavigate();/* ------------ load portfolio ---------------- */useEffect(()=>{apiFetch('/api/users/me/stats').then(async res=>{if(!res.ok)throw new Error('auth');return res.json();}).then(setStats).catch(()=>{clearAuth();onLogout();nav('/login');});},[]);/* ------------ helpers ----------------------- */const handleField=e=>setOrder(o=>({...o,[e.target.name]:e.target.value}));const placeOrder=async()=>{const{symbol,qty,side}=order;if(!symbol||!qty)return alert('Fill symbol and quantity');const res=await apiFetch('/api/trades',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({symbol,qty,side})});const data=await res.json();if(!res.ok)return alert(data.msg||'Order failed');alert(data.msg);// Refresh balance/holdings after a trade\napiFetch('/api/users/me/stats').then(r=>r.json()).then(setStats);};/* ------------ UI ---------------------------- */return/*#__PURE__*/_jsx(Container,{sx:{mt:4},children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:4,children:/*#__PURE__*/_jsx(Card,{sx:{borderRadius:2},children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"Account Balance\"}),/*#__PURE__*/_jsxs(Typography,{variant:\"h4\",color:\"primary\",children:[\"$\",stats.balance.toFixed(2)]}),/*#__PURE__*/_jsxs(Box,{mt:4,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"Your Holdings\"}),/*#__PURE__*/_jsx(List,{children:stats.holdings.map(h=>/*#__PURE__*/_jsx(ListItem,{children:/*#__PURE__*/_jsx(ListItemText,{primary:`${h.symbol}: ${h.shares} shares`,secondary:`Avg cost: $${Number(h.avgCost).toFixed(2)}`})},h.symbol))})]})]})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:8,children:/*#__PURE__*/_jsx(Card,{sx:{borderRadius:2},children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"Place Order\"}),/*#__PURE__*/_jsxs(Box,{component:\"form\",onSubmit:e=>{e.preventDefault();placeOrder();},sx:{display:'flex',gap:2,flexWrap:'wrap',alignItems:'center'},children:[/*#__PURE__*/_jsx(TextField,{label:\"Symbol\",name:\"symbol\",value:order.symbol,onChange:handleField,required:true}),/*#__PURE__*/_jsx(TextField,{label:\"Quantity\",name:\"qty\",type:\"number\",value:order.qty,onChange:handleField,required:true}),/*#__PURE__*/_jsx(Button,{variant:order.side==='buy'?'contained':'outlined',onClick:()=>setOrder(o=>({...o,side:'buy'})),sx:{borderRadius:2,mt:1},children:\"Buy\"}),/*#__PURE__*/_jsx(Button,{variant:order.side==='sell'?'contained':'outlined',color:\"secondary\",onClick:()=>setOrder(o=>({...o,side:'sell'})),sx:{borderRadius:2,mt:1},children:\"Sell\"}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",sx:{borderRadius:2,mt:1},children:\"Submit\"})]})]})})})]})});}","map":{"version":3,"names":["React","useEffect","useState","Container","Grid","Card","CardContent","Typography","List","ListItem","ListItemText","TextField","Button","Box","useNavigate","apiFetch","clearAuth","jsx","_jsx","jsxs","_jsxs","Dashboard","_ref","onLogout","stats","setStats","balance","holdings","order","setOrder","symbol","qty","side","nav","then","res","ok","Error","json","catch","handleField","e","o","target","name","value","placeOrder","alert","method","headers","body","JSON","stringify","data","msg","r","sx","mt","children","container","spacing","item","xs","md","borderRadius","variant","color","toFixed","map","h","primary","shares","secondary","Number","avgCost","component","onSubmit","preventDefault","display","gap","flexWrap","alignItems","label","onChange","required","type","onClick"],"sources":["/Users/benjaminzou/Desktop/CornellProjects/TradingPlatform/client/src/Dashboard.js"],"sourcesContent":["// client/src/Dashboard.js\nimport React, { useEffect, useState } from 'react';\nimport {\n  Container, Grid, Card, CardContent,\n  Typography, List, ListItem, ListItemText,\n  TextField, Button, Box,\n} from '@mui/material';\nimport { useNavigate } from 'react-router-dom';\nimport { apiFetch, clearAuth } from './auth';\n\nexport default function Dashboard({ onLogout }) {\n  const [stats, setStats] = useState({ balance: 0, holdings: [] });\n  const [order, setOrder] = useState({ symbol: '', qty: '', side: 'buy' });\n  const nav = useNavigate();\n\n  /* ------------ load portfolio ---------------- */\n  useEffect(() => {\n    apiFetch('/api/users/me/stats')\n      .then(async (res) => {\n        if (!res.ok) throw new Error('auth');\n        return res.json();\n      })\n      .then(setStats)\n      .catch(() => {\n        clearAuth();\n        onLogout();\n        nav('/login');\n      });\n  }, []);\n\n  /* ------------ helpers ----------------------- */\n  const handleField = (e) =>\n    setOrder((o) => ({ ...o, [e.target.name]: e.target.value }));\n\n  const placeOrder = async () => {\n    const { symbol, qty, side } = order;\n    if (!symbol || !qty) return alert('Fill symbol and quantity');\n\n    const res = await apiFetch('/api/trades', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ symbol, qty, side }),\n    });\n    const data = await res.json();\n    if (!res.ok) return alert(data.msg || 'Order failed');\n\n    alert(data.msg);\n    // Refresh balance/holdings after a trade\n    apiFetch('/api/users/me/stats')\n      .then((r) => r.json())\n      .then(setStats);\n  };\n\n  /* ------------ UI ---------------------------- */\n  return (\n    <Container sx={{ mt: 4 }}>\n      <Grid container spacing={2}>\n        {/* Stats panel */}\n        <Grid item xs={12} md={4}>\n          <Card sx={{ borderRadius: 2 }}>\n            <CardContent>\n              <Typography variant=\"h6\">Account Balance</Typography>\n              <Typography variant=\"h4\" color=\"primary\">\n                ${stats.balance.toFixed(2)}\n              </Typography>\n              <Box mt={4}>\n                <Typography variant=\"h6\">Your Holdings</Typography>\n                <List>\n                  {stats.holdings.map((h) => (\n                    <ListItem key={h.symbol}>\n                      <ListItemText\n                        primary={`${h.symbol}: ${h.shares} shares`}\n                        secondary={`Avg cost: $${Number(h.avgCost).toFixed(2)}`}\n                      />\n                    </ListItem>\n                  ))}\n                </List>\n              </Box>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        {/* Trade panel */}\n        <Grid item xs={12} md={8}>\n          <Card sx={{ borderRadius: 2 }}>\n            <CardContent>\n              <Typography variant=\"h6\">Place Order</Typography>\n\n              <Box\n                component=\"form\"\n                onSubmit={(e) => {\n                  e.preventDefault();\n                  placeOrder();\n                }}\n                sx={{\n                  display: 'flex',\n                  gap: 2,\n                  flexWrap: 'wrap',\n                  alignItems: 'center',\n                }}\n              >\n                <TextField\n                  label=\"Symbol\"\n                  name=\"symbol\"\n                  value={order.symbol}\n                  onChange={handleField}\n                  required\n                />\n                <TextField\n                  label=\"Quantity\"\n                  name=\"qty\"\n                  type=\"number\"\n                  value={order.qty}\n                  onChange={handleField}\n                  required\n                />\n\n                {/* side selector buttons */}\n                <Button\n                  variant={order.side === 'buy' ? 'contained' : 'outlined'}\n                  onClick={() => setOrder((o) => ({ ...o, side: 'buy' }))}\n                  sx={{ borderRadius: 2, mt: 1 }}\n                >\n                  Buy\n                </Button>\n                <Button\n                  variant={order.side === 'sell' ? 'contained' : 'outlined'}\n                  color=\"secondary\"\n                  onClick={() => setOrder((o) => ({ ...o, side: 'sell' }))}\n                  sx={{ borderRadius: 2, mt: 1 }}\n                >\n                  Sell\n                </Button>\n\n                <Button\n                  type=\"submit\"\n                  variant=\"contained\"\n                  sx={{ borderRadius: 2, mt: 1 }}\n                >\n                  Submit\n                </Button>\n              </Box>\n            </CardContent>\n          </Card>\n        </Grid>\n      </Grid>\n    </Container>\n  );\n}\n"],"mappings":"AAAA;AACA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OACEC,SAAS,CAAEC,IAAI,CAAEC,IAAI,CAAEC,WAAW,CAClCC,UAAU,CAAEC,IAAI,CAAEC,QAAQ,CAAEC,YAAY,CACxCC,SAAS,CAAEC,MAAM,CAAEC,GAAG,KACjB,eAAe,CACtB,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,OAASC,QAAQ,CAAEC,SAAS,KAAQ,QAAQ,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE7C,cAAe,SAAS,CAAAC,SAASA,CAAAC,IAAA,CAAe,IAAd,CAAEC,QAAS,CAAC,CAAAD,IAAA,CAC5C,KAAM,CAACE,KAAK,CAAEC,QAAQ,CAAC,CAAGvB,QAAQ,CAAC,CAAEwB,OAAO,CAAE,CAAC,CAAEC,QAAQ,CAAE,EAAG,CAAC,CAAC,CAChE,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAG3B,QAAQ,CAAC,CAAE4B,MAAM,CAAE,EAAE,CAAEC,GAAG,CAAE,EAAE,CAAEC,IAAI,CAAE,KAAM,CAAC,CAAC,CACxE,KAAM,CAAAC,GAAG,CAAGnB,WAAW,CAAC,CAAC,CAEzB,kDACAb,SAAS,CAAC,IAAM,CACdc,QAAQ,CAAC,qBAAqB,CAAC,CAC5BmB,IAAI,CAAC,KAAO,CAAAC,GAAG,EAAK,CACnB,GAAI,CAACA,GAAG,CAACC,EAAE,CAAE,KAAM,IAAI,CAAAC,KAAK,CAAC,MAAM,CAAC,CACpC,MAAO,CAAAF,GAAG,CAACG,IAAI,CAAC,CAAC,CACnB,CAAC,CAAC,CACDJ,IAAI,CAACT,QAAQ,CAAC,CACdc,KAAK,CAAC,IAAM,CACXvB,SAAS,CAAC,CAAC,CACXO,QAAQ,CAAC,CAAC,CACVU,GAAG,CAAC,QAAQ,CAAC,CACf,CAAC,CAAC,CACN,CAAC,CAAE,EAAE,CAAC,CAEN,kDACA,KAAM,CAAAO,WAAW,CAAIC,CAAC,EACpBZ,QAAQ,CAAEa,CAAC,GAAM,CAAE,GAAGA,CAAC,CAAE,CAACD,CAAC,CAACE,MAAM,CAACC,IAAI,EAAGH,CAAC,CAACE,MAAM,CAACE,KAAM,CAAC,CAAC,CAAC,CAE9D,KAAM,CAAAC,UAAU,CAAG,KAAAA,CAAA,GAAY,CAC7B,KAAM,CAAEhB,MAAM,CAAEC,GAAG,CAAEC,IAAK,CAAC,CAAGJ,KAAK,CACnC,GAAI,CAACE,MAAM,EAAI,CAACC,GAAG,CAAE,MAAO,CAAAgB,KAAK,CAAC,0BAA0B,CAAC,CAE7D,KAAM,CAAAZ,GAAG,CAAG,KAAM,CAAApB,QAAQ,CAAC,aAAa,CAAE,CACxCiC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CAAE,cAAc,CAAE,kBAAmB,CAAC,CAC/CC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAEtB,MAAM,CAAEC,GAAG,CAAEC,IAAK,CAAC,CAC5C,CAAC,CAAC,CACF,KAAM,CAAAqB,IAAI,CAAG,KAAM,CAAAlB,GAAG,CAACG,IAAI,CAAC,CAAC,CAC7B,GAAI,CAACH,GAAG,CAACC,EAAE,CAAE,MAAO,CAAAW,KAAK,CAACM,IAAI,CAACC,GAAG,EAAI,cAAc,CAAC,CAErDP,KAAK,CAACM,IAAI,CAACC,GAAG,CAAC,CACf;AACAvC,QAAQ,CAAC,qBAAqB,CAAC,CAC5BmB,IAAI,CAAEqB,CAAC,EAAKA,CAAC,CAACjB,IAAI,CAAC,CAAC,CAAC,CACrBJ,IAAI,CAACT,QAAQ,CAAC,CACnB,CAAC,CAED,kDACA,mBACEP,IAAA,CAACf,SAAS,EAACqD,EAAE,CAAE,CAAEC,EAAE,CAAE,CAAE,CAAE,CAAAC,QAAA,cACvBtC,KAAA,CAAChB,IAAI,EAACuD,SAAS,MAACC,OAAO,CAAE,CAAE,CAAAF,QAAA,eAEzBxC,IAAA,CAACd,IAAI,EAACyD,IAAI,MAACC,EAAE,CAAE,EAAG,CAACC,EAAE,CAAE,CAAE,CAAAL,QAAA,cACvBxC,IAAA,CAACb,IAAI,EAACmD,EAAE,CAAE,CAAEQ,YAAY,CAAE,CAAE,CAAE,CAAAN,QAAA,cAC5BtC,KAAA,CAACd,WAAW,EAAAoD,QAAA,eACVxC,IAAA,CAACX,UAAU,EAAC0D,OAAO,CAAC,IAAI,CAAAP,QAAA,CAAC,iBAAe,CAAY,CAAC,cACrDtC,KAAA,CAACb,UAAU,EAAC0D,OAAO,CAAC,IAAI,CAACC,KAAK,CAAC,SAAS,CAAAR,QAAA,EAAC,GACtC,CAAClC,KAAK,CAACE,OAAO,CAACyC,OAAO,CAAC,CAAC,CAAC,EAChB,CAAC,cACb/C,KAAA,CAACP,GAAG,EAAC4C,EAAE,CAAE,CAAE,CAAAC,QAAA,eACTxC,IAAA,CAACX,UAAU,EAAC0D,OAAO,CAAC,IAAI,CAAAP,QAAA,CAAC,eAAa,CAAY,CAAC,cACnDxC,IAAA,CAACV,IAAI,EAAAkD,QAAA,CACFlC,KAAK,CAACG,QAAQ,CAACyC,GAAG,CAAEC,CAAC,eACpBnD,IAAA,CAACT,QAAQ,EAAAiD,QAAA,cACPxC,IAAA,CAACR,YAAY,EACX4D,OAAO,CAAE,GAAGD,CAAC,CAACvC,MAAM,KAAKuC,CAAC,CAACE,MAAM,SAAU,CAC3CC,SAAS,CAAE,cAAcC,MAAM,CAACJ,CAAC,CAACK,OAAO,CAAC,CAACP,OAAO,CAAC,CAAC,CAAC,EAAG,CACzD,CAAC,EAJWE,CAAC,CAACvC,MAKP,CACX,CAAC,CACE,CAAC,EACJ,CAAC,EACK,CAAC,CACV,CAAC,CACH,CAAC,cAGPZ,IAAA,CAACd,IAAI,EAACyD,IAAI,MAACC,EAAE,CAAE,EAAG,CAACC,EAAE,CAAE,CAAE,CAAAL,QAAA,cACvBxC,IAAA,CAACb,IAAI,EAACmD,EAAE,CAAE,CAAEQ,YAAY,CAAE,CAAE,CAAE,CAAAN,QAAA,cAC5BtC,KAAA,CAACd,WAAW,EAAAoD,QAAA,eACVxC,IAAA,CAACX,UAAU,EAAC0D,OAAO,CAAC,IAAI,CAAAP,QAAA,CAAC,aAAW,CAAY,CAAC,cAEjDtC,KAAA,CAACP,GAAG,EACF8D,SAAS,CAAC,MAAM,CAChBC,QAAQ,CAAGnC,CAAC,EAAK,CACfA,CAAC,CAACoC,cAAc,CAAC,CAAC,CAClB/B,UAAU,CAAC,CAAC,CACd,CAAE,CACFU,EAAE,CAAE,CACFsB,OAAO,CAAE,MAAM,CACfC,GAAG,CAAE,CAAC,CACNC,QAAQ,CAAE,MAAM,CAChBC,UAAU,CAAE,QACd,CAAE,CAAAvB,QAAA,eAEFxC,IAAA,CAACP,SAAS,EACRuE,KAAK,CAAC,QAAQ,CACdtC,IAAI,CAAC,QAAQ,CACbC,KAAK,CAAEjB,KAAK,CAACE,MAAO,CACpBqD,QAAQ,CAAE3C,WAAY,CACtB4C,QAAQ,MACT,CAAC,cACFlE,IAAA,CAACP,SAAS,EACRuE,KAAK,CAAC,UAAU,CAChBtC,IAAI,CAAC,KAAK,CACVyC,IAAI,CAAC,QAAQ,CACbxC,KAAK,CAAEjB,KAAK,CAACG,GAAI,CACjBoD,QAAQ,CAAE3C,WAAY,CACtB4C,QAAQ,MACT,CAAC,cAGFlE,IAAA,CAACN,MAAM,EACLqD,OAAO,CAAErC,KAAK,CAACI,IAAI,GAAK,KAAK,CAAG,WAAW,CAAG,UAAW,CACzDsD,OAAO,CAAEA,CAAA,GAAMzD,QAAQ,CAAEa,CAAC,GAAM,CAAE,GAAGA,CAAC,CAAEV,IAAI,CAAE,KAAM,CAAC,CAAC,CAAE,CACxDwB,EAAE,CAAE,CAAEQ,YAAY,CAAE,CAAC,CAAEP,EAAE,CAAE,CAAE,CAAE,CAAAC,QAAA,CAChC,KAED,CAAQ,CAAC,cACTxC,IAAA,CAACN,MAAM,EACLqD,OAAO,CAAErC,KAAK,CAACI,IAAI,GAAK,MAAM,CAAG,WAAW,CAAG,UAAW,CAC1DkC,KAAK,CAAC,WAAW,CACjBoB,OAAO,CAAEA,CAAA,GAAMzD,QAAQ,CAAEa,CAAC,GAAM,CAAE,GAAGA,CAAC,CAAEV,IAAI,CAAE,MAAO,CAAC,CAAC,CAAE,CACzDwB,EAAE,CAAE,CAAEQ,YAAY,CAAE,CAAC,CAAEP,EAAE,CAAE,CAAE,CAAE,CAAAC,QAAA,CAChC,MAED,CAAQ,CAAC,cAETxC,IAAA,CAACN,MAAM,EACLyE,IAAI,CAAC,QAAQ,CACbpB,OAAO,CAAC,WAAW,CACnBT,EAAE,CAAE,CAAEQ,YAAY,CAAE,CAAC,CAAEP,EAAE,CAAE,CAAE,CAAE,CAAAC,QAAA,CAChC,QAED,CAAQ,CAAC,EACN,CAAC,EACK,CAAC,CACV,CAAC,CACH,CAAC,EACH,CAAC,CACE,CAAC,CAEhB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}